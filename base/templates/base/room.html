{% extends 'main.html' %}
{% block content %}

<!-- /*==============================
=>  AI Room
================================*/ -->

{% if room.host == request.user and room.opponent_type == 'AI' %}
<div class="h-[56.99rem] flex-1 bg-gray-900 p-4 flex justify-center items-center">
  <div class="bg-white w-full md:max-w-4xl rounded-lg shadow">
  <div class="h-12 flex justify-between items-center border-b border-gray-200 m-4">
    <div >
     <div class="text-xl font-bold text-gray-700">{{room.host.username}} Lobby</div>
     <!-- <div class="text-sm font-base text-gray-500">Get Ready To Fight our AI</div> -->
    </div>
  </div>
  <div class="px-6">
    <div class="flex justify-between items-center h-16 p-4 my-6  rounded-lg border border-gray-100 shadow-md">
      <div class="flex items-center">
        <img class="rounded-full h-12 w-12" src="{{room.host.avatar.url}}" alt="Logo" />
      <div class="ml-2">
        <div class="text-sm font-semibold text-gray-600">You</div>
        <div class="text-sm font-light text-gray-500">{{room.host.bio}}</div>
      </div>
      </div>
    </div>
    <div class="flex w-full items-center rounded-full">
      <div class="flex-1 border-b border-gray-300"></div>
      <span class="text-black text-lg font-semibold leading-8 px-8 py-3">VS</span>
      <div class="flex-1 border-b border-gray-300"></div>
    </div>
    <div class="flex justify-between items-center h-16 p-4 my-6  rounded-lg border border-gray-100 shadow-md">
      <div class="flex items-center">
        <img width="50" height="50" src="https://img.icons8.com/ios/50/bot.png" alt="bot"/>
        <div class="ml-2">
          <div class="text-sm font-semibold text-gray-600">Our Mighty Pong AI</div>
          <div class="text-sm font-light text-gray-500">The Ultimate Challenger - Unstoppable</div>
        </div>
      </div>
    </div>
    <div>
      <div class="p-6">
        <a href="{% url 'pong' room.id %}" class="btn h-16 flex items-center justify-center bg-gradient-to-r from-teal-400 to-teal-500 hover:from-teal-500 hover:to-teal-600 w-full rounded-lg shadow-lg text-xl font-medium text-white transition-all duration-300 ease-in-out transform hover:scale-105">
          Start the game
        </a>        
      </div>
    </div>    
      </div>
{% endif %}


<!-- /*==============================
=>  vs Player Room
================================*/ -->

{% if room.opponent_type == 'vs Player' %}
<main class="flex pt-4 pl-8 pr-8 pb-4 h-[57rem] bg-gray-900">
  <div class="w-2/5 bg-gray-900 rounded-tl-md rounded-bl-md">
    <div class="h-[57rem] flex-1 bg-gray-900 p-4 flex justify-center items-center">
      <div class="bg-white w-full md:max-w-4xl rounded-lg shadow">
      <div class="h-12 flex justify-between items-center border-b border-gray-200 m-4 pb-4">
        <div >
          <div class="text-xl font-bold text-gray-700">{{room.host.username}} Lobby</div>
          <div class="text-sm font-base text-gray-500">Waiting Player to Join...</div>
         </div>
        <div>
          <div class="flex items-center justify-center w-full  shadow-md rounded-full">
            <label
                htmlFor="toogleA"
                class="flex items-center cursor-pointer"
            >
              <div class="flex items-center">
                <input id="toogleA" type="checkbox" class="hidden"/>
                <div
                    class="toggle__line w-20 h-10 bg-gray-300 rounded-full shadow-inner"
                >
                </div>
                <div
                    class="toggle__dot bg-red-400 absolute w-10 h-10 bg-white rounded-full shadow flex items-center justify-center"
                >
                  <svg class="text-white w-6 h-6 " xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z" />
                  </svg>
                </div>
              </div>
            </label>
          </div>
        </div>
      </div>
      <div class="px-6">
        <div class="flex justify-between items-center h-16 p-4 my-6  rounded-lg border border-gray-100 shadow-md">
          <div class="flex items-center">
            <img class="rounded-full h-12 w-12" src="https://static-cdn.jtvnw.net/jtv_user_pictures/27fdad08-a2c2-4e0b-8983-448c39519643-profile_image-70x70.png" alt="Logo" />
          <div class="ml-2">
            <div class="text-sm font-semibold text-gray-600">You</div>
            <div class="text-sm font-light text-gray-500">{{room.host.bio}}</div>
          </div>
          </div>
        </div>
        <div class="flex w-full items-center rounded-full">
          <div class="flex-1 border-b border-gray-300"></div>
          <span class="text-black text-lg font-semibold leading-8 px-8 py-3">VS</span>
          <div class="flex-1 border-b border-gray-300"></div>
        </div>
        <div class="flex justify-between items-center h-16 p-4 my-6  rounded-lg border border-gray-100 shadow-md">
          <div class="flex items-center">
            <img class="rounded-full h-12 w-12" src="https://static-cdn.jtvnw.net/jtv_user_pictures/e82b2c90-efe6-41c7-bd50-7caba86fd3b5-profile_image-70x70.png" alt="Logo" />
            <div class="ml-2">
              <div class="text-sm font-semibold text-gray-600">DansGaming</div>
              <div class="text-sm font-light text-gray-500">Level 12 - Paladan</div>
            </div>
          </div>
          <div>
            <button class="bg-red-400 hover:bg-red-500  p-2 rounded-full shadow-md flex justify-center items-center">
              <svg class="text-white toggle__lock w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
              </svg>
            </button>
          </div>
        </div>
        <div class="flex bg-gray-200 justify-center items-center h-16 p-4 my-6  rounded-lg  shadow-inner">
          <div class="flex items-center border border-gray-400 p-2 border-dashed rounded cursor-pointer">
          <div>
            <svg class="text-gray-500 w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
          </svg>
          </div>
            <div class="ml-1 text-gray-500 font-medium"> Invite a friend</div>
          </div>
        </div>
      </div>
      <div class="p-6">
        <a href="{% url 'pong' room.id %}" class="btn h-16 flex items-center justify-center bg-gradient-to-r from-teal-400 to-teal-500 hover:from-teal-500 hover:to-teal-600 w-full rounded-lg shadow-lg text-xl font-medium text-white transition-all duration-300 ease-in-out transform hover:scale-105">
          Start the game
        </a>        
      </div>
      </div>
          </div>
      
      <style>
        .toggle__dot {
          transition: all 0.3s ease-in-out;
      }
      
      input:checked ~ .toggle__dot {
          transform: translateX(100%);
          background-color:#68D391
      }
      </style>
  </div>
  <div class="w-3/5 bg-gray-900 p-4 rounded-tr-md rounded-br-md">
    <div class="bg-white w-full h-[4rem] rounded-tr-md rounded-tl-md p-5">
      <p>{{room.name}} Chat (Live-chat)</p>
    </div>
    <div  id='chat_container' class="w-full h-[43.5rem] bg-indigo-100 p-2 rounded-br-md rounded-bl-md overflow-scroll">

      <ul id='chat_messages' class="flex flex-col justify-end gap-2 p-4">
        {% for message in chat_messages reversed %}
        {% if message.author == user %}
        <li class="flex justify-end mb-4">
            <div class="bg-green-200 rounded-l-lg rounded-tr-lg p-4 max-w-[75%] text-black">
                <span>{{ message.body }}</span>
            </div>
            <div class="flex items-end">
                <svg height="13" width="8" >
                    <path fill="#bbf7d0" d="M6.3,10.4C1.5,8.7,0.9,5.5,0,0.2L0,13l5.2,0C7,13,9.6,11.5,6.3,10.4z"/>
                </svg>
            </div>
        </li>
        {% else %}
        <li>
            <div class="flex justify-start">
                <div class="flex items-end mr-2" >
                    <a href="{% url 'user-profile' message.author.id %}">
                        <div class="relative">
                            <div id="user-{{ message.author.id }}"></div>
                            <img class="w-8 h-8 rounded-full object-cover" src="{{ message.author.avatar.url }}">
                        </div>
                    </a>
                </div>
                <div class="flex items-end" >
                    <svg height="13" width="8" >
                        <path fill="white" d="M2.8,13L8,13L8,0.2C7.1,5.5,6.5,8.7,1.7,10.4C-1.6,11.5,1,13,2.8,13z"></path>
                    </svg>
                </div>
                <div class="bg-white p-4 max-w-[75%] rounded-r-lg rounded-tl-lg text-black">
                    <span>{{ message.body }}</span>
                </div>  
            </div>
            <div class="text-sm font-light py-1 ml-10">
                <span class="text-white">{{ message.author.profile.name }}</span> 
                <span class="text-gray-400">@{{ message.author.username }}</span>
            </div>
        </li>
        {% endif %}
        {% endfor %}
    </ul>

     </div>
      <div class="pt-5"></div>
      <form id="chat_message_form" class="w-full"
      hx-ext="ws"
      ws-connect="/ws/chatroom/{{ chatroom_name }}"
      ws-send 
      _="on htmx:wsAfterSend reset() me"
      method="POST">
      {% csrf_token %}
      <div class="w-full pl-3 pr-1 py-1 rounded-3xl border border-gray-400 flex items-center gap-2 justify-between">
        <div class="flex items-center gap-2 flex-1">
          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22" fill="none">
            <g id="User Circle">
              <path id="icon" d="M6.05 17.6C6.05 15.3218 8.26619 13.475 11 13.475C13.7338 13.475 15.95 15.3218 15.95 17.6M13.475 8.525C13.475 9.89191 12.3669 11 11 11C9.6331 11 8.525 9.89191 8.525 8.525C8.525 7.1581 9.6331 6.05 11 6.05C12.3669 6.05 13.475 7.1581 13.475 8.525ZM19.25 11C19.25 15.5563 15.5563 19.25 11 19.25C6.44365 19.25 2.75 15.5563 2.75 11C2.75 6.44365 6.44365 2.75 11 2.75C15.5563 2.75 19.25 6.44365 19.25 11Z" stroke="teal" stroke-width="1.6" />
            </g>
          </svg>
          <input class="flex-1 text-black text-xs font-medium leading-4 focus:outline-none rounded-2xl px-2 py-2" type="text" name="body" maxlength="300" autofocus id="is_body" placeholder="Enter message here...">
        </div>
        <div class="flex items-center gap-2">
          <svg class="cursor-pointer" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22" fill="none">
            <g id="Attach 01">
              <g id="Vector">
                <path d="M14.9332 7.79175L8.77551 14.323C8.23854 14.8925 7.36794 14.8926 6.83097 14.323C6.294 13.7535 6.294 12.83 6.83097 12.2605L12.9887 5.72925M12.3423 6.41676L13.6387 5.04176C14.7126 3.90267 16.4538 3.90267 17.5277 5.04176C18.6017 6.18085 18.6017 8.02767 17.5277 9.16676L16.2314 10.5418M16.8778 9.85425L10.72 16.3855C9.10912 18.0941 6.49732 18.0941 4.88641 16.3855C3.27549 14.6769 3.27549 11.9066 4.88641 10.198L11.0441 3.66675" stroke="#9CA3AF" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M14.9332 7.79175L8.77551 14.323C8.23854 14.8925 7.36794 14.8926 6.83097 14.323C6.294 13.7535 6.294 12.83 6.83097 12.2605L12.9887 5.72925M12.3423 6.41676L13.6387 5.04176C14.7126 3.90267 16.4538 3.90267 17.5277 5.04176C18.6017 6.18085 18.6017 8.02767 17.5277 9.16676L16.2314 10.5418M16.8778 9.85425L10.72 16.3855C9.10912 18.0941 6.49732 18.0941 4.88641 16.3855C3.27549 14.6769 3.27549 11.9066 4.88641 10.198L11.0441 3.66675" stroke="white" stroke-opacity="0.2" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M14.9332 7.79175L8.77551 14.323C8.23854 14.8925 7.36794 14.8926 6.83097 14.323C6.294 13.7535 6.294 12.83 6.83097 12.2605L12.9887 5.72925M12.3423 6.41676L13.6387 5.04176C14.7126 3.90267 16.4538 3.90267 17.5277 5.04176C18.6017 6.18085 18.6017 8.02767 17.5277 9.16676L16.2314 10.5418M16.8778 9.85425L10.72 16.3855C9.10912 18.0941 6.49732 18.0941 4.88641 16.3855C3.27549 14.6769 3.27549 11.9066 4.88641 10.198L11.0441 3.66675" stroke="white" stroke-opacity="0.2" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" />
              </g>
            </g>
          </svg>
          <button class="items-center flex px-3 py-2 bg-teal-400 rounded-full shadow">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
              <g id="Send 01">
                <path id="icon" d="M9.04071 6.959L6.54227 9.45744M6.89902 10.0724L7.03391 10.3054C8.31034 12.5102 8.94855 13.6125 9.80584 13.5252C10.6631 13.4379 11.0659 12.2295 11.8715 9.81261L13.0272 6.34566C13.7631 4.13794 14.1311 3.03408 13.5484 2.45139C12.9657 1.8687 11.8618 2.23666 9.65409 2.97257L6.18714 4.12822C3.77029 4.93383 2.56187 5.33664 2.47454 6.19392C2.38721 7.0512 3.48957 7.68941 5.69431 8.96584L5.92731 9.10074C6.23326 9.27786 6.38623 9.36643 6.50978 9.48998C6.63333 9.61352 6.72189 9.7665 6.89902 10.0724Z" stroke="black" stroke-width="1.6" stroke-linecap="round" />
              </g>
            </svg>
            <h3 class="text-black text-xs font-semibold leading-4 px-2">Send</h3>
          </button>
        </div>
      </div>      
  </form>
  </div>

</main>
{% endif %}

<!-- /*==============================
=>  Tournament Room
================================*/ -->

{% if room.host == request.user and room.opponent_type == 'Tournament' %}
<main class="profile-page layout layout--2">
  <div class="container">
    <!-- Room Start -->
    <div class="room">
      <div class="room__top">
        <div class="room__topLeft">
          <a href="{% url 'home' %}">
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">
              <title>arrow-left</title>
              <path
                d="M13.723 2.286l-13.723 13.714 13.719 13.714 1.616-1.611-10.96-10.96h27.625v-2.286h-27.625l10.965-10.965-1.616-1.607z">
              </path>
            </svg>
          </a>
          <h3>Game Room</h3>
        </div>
        {% if room.host == request.user %}
        <div class="room__topRight">
          <a href="{% url 'update-room' room.id %}">
            <svg enable-background="new 0 0 24 24" height="32" viewBox="0 0 24 24" width="32"
              xmlns="http://www.w3.org/2000/svg">
              <title>edit</title>
              <g>
                <path d="m23.5 22h-15c-.276 0-.5-.224-.5-.5s.224-.5.5-.5h15c.276 0 .5.224.5.5s-.224.5-.5.5z" />
              </g>
              <g>
                <g>
                  <path
                    d="m2.5 22c-.131 0-.259-.052-.354-.146-.123-.123-.173-.3-.133-.468l1.09-4.625c.021-.09.067-.173.133-.239l14.143-14.143c.565-.566 1.554-.566 2.121 0l2.121 2.121c.283.283.439.66.439 1.061s-.156.778-.439 1.061l-14.142 14.141c-.065.066-.148.112-.239.133l-4.625 1.09c-.038.01-.077.014-.115.014zm1.544-4.873-.872 3.7 3.7-.872 14.042-14.041c.095-.095.146-.22.146-.354 0-.133-.052-.259-.146-.354l-2.121-2.121c-.19-.189-.518-.189-.707 0zm3.081 3.283h.01z" />
                </g>
                <g>
                  <path
                    d="m17.889 10.146c-.128 0-.256-.049-.354-.146l-3.535-3.536c-.195-.195-.195-.512 0-.707s.512-.195.707 0l3.536 3.536c.195.195.195.512 0 .707-.098.098-.226.146-.354.146z" />
                </g>
              </g>
            </svg>
          </a>
          <a href="{% url 'delete-room' room.id %}">
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">
              <title>remove</title>
              <path
                d="M27.314 6.019l-1.333-1.333-9.98 9.981-9.981-9.981-1.333 1.333 9.981 9.981-9.981 9.98 1.333 1.333 9.981-9.98 9.98 9.98 1.333-1.333-9.98-9.98 9.98-9.981z">
              </path>
            </svg>
          </a>
        </div>
        {% endif %}

      </div>
      <div class="room__box scroll">
        <div class="room__header scroll">
          <div class="room__info">
            <h3>{{room.name}}</h3>
            <span>{{room.created|timesince}} ago</span>
          </div>
          <div class="room__hosted">
            <p>Created By</p>
            <a href="{% url 'user-profile' room.host.id %}" class="room__author">
              <div class="avatar avatar--small">
                <img src="{{room.host.avatar.url}}" />
              </div>
              <span>@{{room.host.username}}</span>
            </a>
          </div>
          <div class="room__details">
            {{room.description}}
          </div>
          <br></br>
          <span class="room__topics">{{room.opponent_type}}</span>
          <a class="btn btn--main" href="{% url 'pong' room.id %}">
            Play Now
          </a>
        </div>

        <div class="room__conversation">
          <div class="threads scroll">


            {% for message in room_messages %}
            <div class="thread">
              <div class="thread__top">
                <div class="thread__author">
                  <a href="{% url 'user-profile' message.user.id %}" class="thread__authorInfo">
                    <div class="avatar avatar--small">
                      <img src="{{message.user.avatar.url}}" />
                    </div>
                    <span>@{{message.user.username}}</span>
                  </a>
                  <span class="thread__date">{{message.created|timesince}} ago</span>
                </div>

                {% if request.user == message.user %}
                <a href="{% url 'delete-message' message.id %}">
                  <div class="thread__delete">
                    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">
                      <title>remove</title>
                      <path
                        d="M27.314 6.019l-1.333-1.333-9.98 9.981-9.981-9.981-1.333 1.333 9.981 9.981-9.981 9.98 1.333 1.333 9.981-9.98 9.98 9.98 1.333-1.333-9.98-9.98 9.98-9.981z">
                      </path>
                    </svg>
                  </div>
                </a>
                {% endif %}
              </div>
              <div class="thread__details">
                {{message.body}}
              </div>
            </div>
            {% endfor %}
          </div>
        </div>

      </div>
      <div class="room__message">
        <form action="" method="POST">
          {% csrf_token %}
          <input name="body" placeholder="Write your message here..." />
        </form>
      </div>
    </div>
    <!-- Room End -->

    <!--   Start -->
    <div class="participants">
      <h3 class="participants__top">Participants <span>({{participants.count}} Joined)</span></h3>
      <div class="participants__list scroll">
        {% for user in participants %}
        <a href="{%  url 'user-profile' user.id %}" class="participant">
          <div class="avatar avatar--medium">
            <img src="{{user.avatar.url}}" />
          </div>
          <p>
            {{user.name}}
            <span>@{{user.username}}</span>
          </p>
        </a>
        {% endfor %}
      </div>
    </div>
    <!--  End -->
  </div>
</main>
<script src="script.js"></script>
{% endif %}

{% if room.host != request.user and room.opponent_type == 'Tournament' %}
<main class="profile-page layout layout--2">
  <div class="container">
    <!-- Room Start -->
    <div class="room">
      <div class="room__top">
        <div class="room__topLeft">
          <a href="{% url 'home' %}">
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">
              <title>arrow-left</title>
              <path
                d="M13.723 2.286l-13.723 13.714 13.719 13.714 1.616-1.611-10.96-10.96h27.625v-2.286h-27.625l10.965-10.965-1.616-1.607z">
              </path>
            </svg>
          </a>
          <h3>Game Room</h3>
        </div>
        {% if room.host == request.user %}
        <div class="room__topRight">
          <a href="{% url 'update-room' room.id %}">
            <svg enable-background="new 0 0 24 24" height="32" viewBox="0 0 24 24" width="32"
              xmlns="http://www.w3.org/2000/svg">
              <title>edit</title>
              <g>
                <path d="m23.5 22h-15c-.276 0-.5-.224-.5-.5s.224-.5.5-.5h15c.276 0 .5.224.5.5s-.224.5-.5.5z" />
              </g>
              <g>
                <g>
                  <path
                    d="m2.5 22c-.131 0-.259-.052-.354-.146-.123-.123-.173-.3-.133-.468l1.09-4.625c.021-.09.067-.173.133-.239l14.143-14.143c.565-.566 1.554-.566 2.121 0l2.121 2.121c.283.283.439.66.439 1.061s-.156.778-.439 1.061l-14.142 14.141c-.065.066-.148.112-.239.133l-4.625 1.09c-.038.01-.077.014-.115.014zm1.544-4.873-.872 3.7 3.7-.872 14.042-14.041c.095-.095.146-.22.146-.354 0-.133-.052-.259-.146-.354l-2.121-2.121c-.19-.189-.518-.189-.707 0zm3.081 3.283h.01z" />
                </g>
                <g>
                  <path
                    d="m17.889 10.146c-.128 0-.256-.049-.354-.146l-3.535-3.536c-.195-.195-.195-.512 0-.707s.512-.195.707 0l3.536 3.536c.195.195.195.512 0 .707-.098.098-.226.146-.354.146z" />
                </g>
              </g>
            </svg>
          </a>
          <a href="{% url 'delete-room' room.id %}">
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">
              <title>remove</title>
              <path
                d="M27.314 6.019l-1.333-1.333-9.98 9.981-9.981-9.981-1.333 1.333 9.981 9.981-9.981 9.98 1.333 1.333 9.981-9.98 9.98 9.98 1.333-1.333-9.98-9.98 9.98-9.981z">
              </path>
            </svg>
          </a>
        </div>
        {% endif %}

      </div>
      <div class="room__box scroll">
        <div class="room__header scroll">
          <div class="room__info">
            <h3>{{room.name}}</h3>
            <span>{{room.created|timesince}} ago</span>
          </div>
          <div class="room__hosted">
            <p>Created By</p>
            <a href="{% url 'user-profile' room.host.id %}" class="room__author">
              <div class="avatar avatar--small">
                <img src="{{room.host.avatar.url}}" />
              </div>
              <span>@{{room.host.username}}</span>
            </a>
          </div>
          <div class="room__details">
            {{room.description}}
          </div>
          <br></br>
          <span class="room__topics">{{room.opponent_type}}</span>
          <a class="btn btn--main" href="{% url 'pong' room.id %}">
            Play Now
          </a>
        </div>

        <div class="room__conversation">
          <div class="threads scroll">


            {% for message in room_messages %}
            <div class="thread">
              <div class="thread__top">
                <div class="thread__author">
                  <a href="{% url 'user-profile' message.user.id %}" class="thread__authorInfo">
                    <div class="avatar avatar--small">
                      <img src="{{message.user.avatar.url}}" />
                    </div>
                    <span>@{{message.user.username}}</span>
                  </a>
                  <span class="thread__date">{{message.created|timesince}} ago</span>
                </div>

                {% if request.user == message.user %}
                <a href="{% url 'delete-message' message.id %}">
                  <div class="thread__delete">
                    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">
                      <title>remove</title>
                      <path
                        d="M27.314 6.019l-1.333-1.333-9.98 9.981-9.981-9.981-1.333 1.333 9.981 9.981-9.981 9.98 1.333 1.333 9.981-9.98 9.98 9.98 1.333-1.333-9.98-9.98 9.98-9.981z">
                      </path>
                    </svg>
                  </div>
                </a>
                {% endif %}
              </div>
              <div class="thread__details">
                {{message.body}}
              </div>
            </div>
            {% endfor %}
          </div>
        </div>

      </div>
      <div class="room__message">
        <form action="" method="POST">
          {% csrf_token %}
          <input name="body" placeholder="Write your message here..." />
        </form>
      </div>
    </div>
    <!-- Room End -->
    <!--   Start -->
    <div class="participants">
        <h3 class="participants__top">Participants <span>({{participants.count}} Joined)</span></h3>
        <div class="participants__list scroll">
            {% for user in participants %}
            <a href="{%  url 'user-profile' user.id %}" class="participant">
            <div class="avatar avatar--medium">
                <img src="{{user.avatar.url}}" />
            </div>
            <p>
                {{user.name}}
                <span>@{{user.username}}</span>
            </p>
            </a>
            {% endfor %}
        </div>
    </div>
        <!--  End -->
  </div>
</main>
<script src="script.js"></script>
{% endif %}
{% endblock content %}